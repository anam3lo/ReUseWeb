[
  {
    "id": "welcome-message",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Mensagem de Boas-vindas",
    "func": "const welcomeMsg = {\n    type: 'message',\n    content: 'üëã Ol√°! Sou o assistente da ReUse. Vou te ajudar a cadastrar um produto!\\n\\nVamos come√ßar?',\n    buttons: [\n        { text: 'Iniciar Tutorial üöÄ', value: 'start_tutorial' },\n        { text: 'Ajuda Geral ‚ùì', value: 'general_help' }\n    ],\n    step: 'welcome',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = welcomeMsg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 350,
    "y": 40,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "user-input",
    "type": "http in",
    "z": "chatbot-flow",
    "name": "Receber Input",
    "url": "/chatbot/input",
    "method": "post",
    "upload": false,
    "swaggerDoc": "",
    "x": 150,
    "y": 120,
    "wires": [
      [
        "process-input"
      ]
    ]
  },
  {
    "id": "process-input",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Processar Input",
    "func": "const userInput = msg.payload;\nconst message = userInput.message || '';\nconst buttonValue = userInput.buttonValue || '';\n\nlet action = '';\n\nif (buttonValue) {\n    action = buttonValue;\n} else if (message.toLowerCase() === 'start' || message.toLowerCase() === 'iniciar') {\n    action = 'welcome';\n} else {\n    action = 'welcome';\n}\n\nmsg.payload = { action: action };\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 350,
    "y": 120,
    "wires": [
      [
        "action-router"
      ]
    ]
  },
  {
    "id": "action-router",
    "type": "switch",
    "z": "chatbot-flow",
    "name": "Roteador",
    "property": "payload.action",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "welcome",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "start_tutorial",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "general_help",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 3,
    "x": 550,
    "y": 120,
    "wires": [
      [
        "welcome-message"
      ],
      [
        "step-1"
      ],
      [
        "help"
      ]
    ]
  },
  {
    "id": "step-1",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Passo 1: T√≠tulo",
    "func": "const step1Msg = {\n    type: 'message',\n    content: 'üìù PASSO 1: T√çTULO DO PRODUTO\\n\\nO t√≠tulo deve ser claro e descritivo.\\n\\nExemplos bons:\\n- iPhone 12 em √≥timo estado\\n- Mesa de escrit√≥rio de madeira\\n- Livros de programa√ß√£o React\\n\\nExemplos ruins:\\n- Vendo\\n- Item usado\\n- Produto',\n    buttons: [\n        { text: 'Pr√≥ximo Passo ‚û°Ô∏è', value: 'step_2' },\n        { text: 'Ver exemplo novamente üîÑ', value: 'repeat_step_1' },\n        { text: 'Voltar ‚¨ÖÔ∏è', value: 'welcome' }\n    ],\n    step: 'step_1',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = step1Msg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 80,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "step-2-category",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Passo 2: Categoria",
    "func": "const step2Msg = {\n    type: 'message',\n    content: 'üè∑Ô∏è PASSO 2: CATEGORIA DO PRODUTO\\n\\nA categoria ajuda outros usu√°rios a encontrar seu produto.\\n\\nCategorias dispon√≠veis:\\n\\nüì± Eletr√¥nicos - Celulares, computadores, tablets\\nüëï Roupas - Vestu√°rio, cal√ßados, acess√≥rios\\nüìö Livros - Livros f√≠sicos e digitais\\nü™ë M√≥veis - Mesas, cadeiras, arm√°rios\\nüè† Casa e Jardim - Decora√ß√£o, plantas, utens√≠lios\\n‚öΩ Esportes - Equipamentos esportivos\\nüß∏ Brinquedos - Brinquedos para crian√ßas\\nüì¶ Outros - Itens que n√£o se encaixam nas categorias acima',\n    buttons: [\n        { text: 'Pr√≥ximo Passo ‚û°Ô∏è', value: 'step_3' },\n        { text: 'Ver categorias novamente üîÑ', value: 'repeat_step_2' },\n        { text: 'Voltar ‚¨ÖÔ∏è', value: 'step_1' }\n    ],\n    step: 'step_2',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = step2Msg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 160,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "step-3-description",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Passo 3: Descri√ß√£o",
    "func": "const step3Msg = {\n    type: 'message',\n    content: 'üìÑ PASSO 3: DESCRI√á√ÉO DO PRODUTO\\n\\nA descri√ß√£o √© opcional, mas altamente recomendada!\\n\\nO que incluir:\\n\\n‚úÖ Estado do produto (novo, usado, seminovo)\\n‚úÖ Detalhes t√©cnicos (especifica√ß√µes, modelo)\\n‚úÖ Acess√≥rios inclu√≠dos (carregador, caixa, etc.)\\n‚úÖ Motivo da troca (opcional)\\n‚úÖ Defeitos menores (se houver)\\n\\nExemplo de boa descri√ß√£o:\\n\\niPhone 12 com 128GB, sem riscos na tela, bateria com 85% de sa√∫de. Inclui carregador original, cabo USB-C e pel√≠cula de vidro. Troco porque comprei um modelo mais novo.',\n    buttons: [\n        { text: 'Pr√≥ximo Passo ‚û°Ô∏è', value: 'step_4' },\n        { text: 'Ver exemplos novamente üîÑ', value: 'repeat_step_3' },\n        { text: 'Voltar ‚¨ÖÔ∏è', value: 'step_2' }\n    ],\n    step: 'step_3',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = step3Msg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 240,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "step-4-image",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Passo 4: Imagem",
    "func": "const step4Msg = {\n    type: 'message',\n    content: 'üì∏ PASSO 4: IMAGEM DO PRODUTO\\n\\nUma boa imagem aumenta muito as chances de troca!\\n\\nComo adicionar:\\n\\nOp√ß√£o 1 - Upload de arquivo:\\n‚Ä¢ Clique em Upload de Arquivo\\n‚Ä¢ Selecione uma foto do seu dispositivo\\n‚Ä¢ Formatos aceitos: JPG, PNG, GIF\\n\\nOp√ß√£o 2 - URL da imagem:\\n‚Ä¢ Cole o link de uma imagem da internet\\n‚Ä¢ Certifique-se que a URL est√° funcionando\\n\\nDicas para uma boa foto:\\n\\n‚úÖ Boa ilumina√ß√£o - Evite fotos escuras\\n‚úÖ Produto em destaque - Evite fundos bagun√ßados\\n‚úÖ M√∫ltiplos √¢ngulos - Se poss√≠vel, v√°rias fotos\\n‚úÖ Mostre detalhes - Especialmente se houver defeitos',\n    buttons: [\n        { text: 'Pr√≥ximo Passo ‚û°Ô∏è', value: 'step_5' },\n        { text: 'Ver dicas novamente üîÑ', value: 'repeat_step_4' },\n        { text: 'Voltar ‚¨ÖÔ∏è', value: 'step_3' }\n    ],\n    step: 'step_4',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = step4Msg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 320,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "step-5-final",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Passo 5: Finaliza√ß√£o",
    "func": "const step5Msg = {\n    type: 'message',\n    content: 'üéâ PARAB√âNS! Voc√™ aprendeu como cadastrar um produto!\\n\\nRESUMO DO QUE APRENDEMOS:\\n\\n1Ô∏è‚É£ T√≠tulo - Claro e descritivo\\n2Ô∏è‚É£ Categoria - Escolha a mais adequada\\n3Ô∏è‚É£ Descri√ß√£o - Detalhe o estado e caracter√≠sticas\\n4Ô∏è‚É£ Imagem - Foto de qualidade (opcional)\\n\\nPR√ìXIMOS PASSOS:\\n\\n1. Acesse a p√°gina Anunciar Produto\\n2. Preencha os campos seguindo nossas dicas\\n3. Revise todas as informa√ß√µes\\n4. Clique em Anunciar Produto\\n5. Aguarde a aprova√ß√£o (se necess√°rio)\\n\\nDICAS EXTRAS:\\n\\n‚Ä¢ Seja honesto sobre o estado do produto\\n‚Ä¢ Responda mensagens de interessados rapidamente\\n‚Ä¢ Mantenha suas informa√ß√µes de contato atualizadas\\n‚Ä¢ Considere trocar por produtos de valor similar',\n    buttons: [\n        { text: 'Ir para cadastro de produto üöÄ', value: 'go_to_form' },\n        { text: 'Revisar tutorial üîÑ', value: 'start_tutorial' },\n        { text: 'Preciso de mais ajuda ‚ùì', value: 'general_help' },\n        { text: 'Finalizar ‚úÖ', value: 'finish' }\n    ],\n    step: 'step_5',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = step5Msg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 400,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "help",
    "type": "function",
    "z": "chatbot-flow",
    "name": "Ajuda Geral",
    "func": "const helpMsg = {\n    type: 'message',\n    content: '‚ùì AJUDA GERAL - PLATAFORMA REUSE\\n\\nO que √© a ReUse?\\nA ReUse √© uma plataforma que conecta pessoas para trocar itens usados, promovendo sustentabilidade e economia circular.\\n\\nCOMO FUNCIONA:\\n\\n1Ô∏è‚É£ Cadastre-se - Crie sua conta gratuitamente\\n2Ô∏è‚É£ Anuncie produtos - Publique itens que voc√™ n√£o usa mais\\n3Ô∏è‚É£ Procure produtos - Encontre itens que voc√™ precisa\\n4Ô∏è‚É£ Troque - Negocie trocas com outros usu√°rios\\n\\nSISTEMA DE MENSAGENS:\\n‚Ä¢ Converse diretamente com outros usu√°rios\\n‚Ä¢ Negocie detalhes da troca\\n‚Ä¢ Combine local e forma de entrega\\n\\nSEGURAN√áA:\\n‚Ä¢ Todos os usu√°rios s√£o verificados\\n‚Ä¢ Sistema de avalia√ß√µes\\n‚Ä¢ Suporte ao cliente dispon√≠vel',\n    buttons: [\n        { text: 'Voltar ao tutorial üìù', value: 'start_tutorial' },\n        { text: 'Preciso de suporte t√©cnico üîß', value: 'tech_support' },\n        { text: 'Finalizar ‚úÖ', value: 'finish' }\n    ],\n    step: 'help',\n    timestamp: new Date().toISOString()\n};\nmsg.payload = helpMsg;\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 750,
    "y": 480,
    "wires": [
      [
        "send-response"
      ]
    ]
  },
  {
    "id": "send-response",
    "type": "http response",
    "z": "chatbot-flow",
    "name": "Resposta",
    "statusCode": "200",
    "headers": {
      "Content-Type": "application/json"
    },
    "x": 1050,
    "y": 200,
    "wires": []
  }
]
